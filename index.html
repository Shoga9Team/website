<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <base href="./">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="./favicon.gif" type="image/x-icon" />
    <title>Shoga9Team</title>
</head>
<body>
    <script rel="modulepreload" type="module">
        import { ProxifyHook } from './proxifyjs/JavaScript/Classes/Helper/ProxifyHook.js'
        import { InitBasic } from './proxifyjs/JavaScript/Classes/Controller/InitBasic.js'
        // Menu
        import AnchorMenu from './proxifyjs/Docs/AnchorMenu.js'
        import Scroll from './proxifyjs/Docs/Scroll.js'
        import Menu from './JavaScript/Menu.js'
        // HTML El's
        import Content from './JavaScript/Content.js'
        import Loading from './JavaScript/Loading.js'

        class Index {
            constructor() {
                this.makeGlobal('__', new ProxifyHook(InitBasic).get())
                this.headEl = __(document.getElementsByTagName('head')[0])
                this.baseEl = __(document.getElementsByTagName('base')[0])
                this.titleEl = __(document.getElementsByTagName('title')[0])
                this.bodyEl = __(document.getElementsByTagName('body')[0])
                this.contentEl = new Content
                this.loadingEl = new Loading(this.headEl)
                this.setup(this.bodyEl)
            }
            setup(body){
                body
                    .$appendChildren([
                        new Menu(this.contentEl, this.titleEl, this.baseEl, this.loadingEl),
                        // TODO: Add LanguageMenu to set localStorage.setItem('language', 'de'|'ja'|...) and location.reload (Menu.js->load has support)
                        this.loadingEl,
                        this.contentEl
                    ])
                    // above renders out, so that AnchorMenu can grab body.h2 tags
                    .$_insertBefore(new AnchorMenu(body), this.loadingEl)
                    .$css(`{
                        display: grid;
                        grid-template-areas: "menu menu"
                                             "loading loading"
                                             "content content";
                        grid-template-columns: 1fr 2fr;
                        grid-template-rows: 2fr 1fr minmax(2fr, auto);
                    }`)
                new Scroll()
            }
            makeGlobal(name, obj) {
                return window[name] = obj
            }
        }
        new Index()
    </script>
    <script rel="modulepreload" type="module">
        import WordCount from './JavaScript/WordCount.js'

        customElements.define('word-count', WordCount, { extends: 'p' });
    </script>
    <word-count>Hello<a>bahhh</a></word-count>
    <script>
            (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-76753121-2', 'auto');
        ga('send', 'pageview');
    </script>
</body>
</html>